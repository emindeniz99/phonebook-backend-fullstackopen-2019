{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/persondb.js","components/Notification.js","App.js","index.js"],"names":["Filter","handleSearchChange","onChange","type","Persons","numbersToShow","deletePerson","map","person","key","id","name","number","style","marginLeft","onClick","window","confirm","PersonForm","addPerson","newNumber","newName","handleNameChange","handleNumberChange","onSubmit","value","baseUrl","axios","get","then","res","data","newPerson","post","delete","put","Notification","message","className","color","App","useState","persons","setPersons","setNewName","setNewNumber","searchText","setSearchText","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personsService","filter","toLowerCase","includes","event","target","preventDefault","isNew","forEach","per","setTimeout","catch","err","response","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3e17999f.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ handleSearchChange }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tfilter shown with{\" \"}\r\n\t\t\t<input onChange={handleSearchChange} type=\"text\" />{\" \"}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\"\r\n\r\nconst Persons = ({ numbersToShow, deletePerson }) => {\r\n\treturn numbersToShow.map(person => (\r\n\t\t<div key={person.id}>\r\n\t\t\t{person.name} {person.number}\r\n\t\t\t<button\r\n\t\t\t\tstyle={{ marginLeft: \"10px\" }}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (window.confirm(`Delete ${person.name}`)) {\r\n\t\t\t\t\t\tdeletePerson(person.id)\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\tdelete\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t))\r\n}\r\n\r\nexport default Persons\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n\taddPerson,\r\n\tnewNumber,\r\n\tnewName,\r\n\thandleNameChange,\r\n\thandleNumberChange\r\n}) => {\r\n\treturn (\r\n\t\t<form onSubmit={addPerson}>\r\n\t\t\t<div>\r\n\t\t\t\tname: <input value={newName} onChange={handleNameChange} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\tnumber:{\" \"}\r\n\t\t\t\t<input value={newNumber} onChange={handleNumberChange} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<button type=\"submit\">add</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n};\r\nexport default PersonForm;\r\n","import axios from \"axios\"\r\n// const baseUrl = \"http://localhost:3001/persons\"\r\nconst baseUrl = \"/api/persons\" // \"/api/\" added to use part3\r\n\r\n\r\nconst getPersons = () => {\r\n\treturn axios.get(baseUrl).then(res => res.data)\r\n}\r\nconst addPerson = newPerson => {\r\n\treturn axios.post(baseUrl, newPerson).then(res => res.data)\r\n}\r\nconst deletePerson = id => {\r\n\treturn axios.delete(`${baseUrl}/${id}`)\r\n}\r\nconst updatePerson = person => {\r\n\treturn axios.put(`${baseUrl}/${person.id}`, person).then(res => res.data)\r\n}\r\n\r\nexport default {\r\n\tgetPersons,\r\n\taddPerson,\r\n\tdeletePerson,\r\n\tupdatePerson\r\n}\r\n","import React from \"react\"\r\n\r\nconst Notification = ({ message, type }) => {\r\n\tif (message === null) {\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"notification\"\r\n\t\t\tstyle={{ color: type === \"success\" ? \"green\" : \"red\" }}\r\n\t\t>\r\n\t\t\t{message}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Notification\r\n","import React, { useState, useEffect } from \"react\"\nimport Filter from \"./components/Filter\"\nimport Persons from \"./components/Persons\"\nimport PersonForm from \"./components/PersonForm\"\nimport personsService from \"./services/persondb\"\nimport Notification from \"./components/Notification\"\n\nconst App = () => {\n\tconst [persons, setPersons] = useState([])\n\tconst [newName, setNewName] = useState(\"\")\n\tconst [newNumber, setNewNumber] = useState(\"\")\n\tconst [searchText, setSearchText] = useState(\"\")\n\tconst [successMessage, setSuccessMessage] = useState(null)\n\tconst [errorMessage, setErrorMessage] = useState(null)\n\n\tuseEffect(() => {\n\t\tpersonsService.getPersons().then(res => setPersons(res))\n\t}, [])\n\n\tconst handleNameChange = event => {\n\t\tsetNewName(event.target.value)\n\t}\n\tconst handleNumberChange = event => {\n\t\tsetNewNumber(event.target.value)\n\t}\n\tconst handleSearchChange = event => {\n\t\tsetSearchText(event.target.value)\n\t}\n\n\tconst addPerson = event => {\n\t\tevent.preventDefault()\n\n\t\tlet isNew = true\n\t\tpersons.forEach(person => {\n\t\t\tif (person.name === newName) {\n\t\t\t\tisNew = false\n\t\t\t\tif (\n\t\t\t\t\twindow.confirm(\n\t\t\t\t\t\t`${newName} is already added to phonebook, replace the old number with a new one?`\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tpersonsService\n\t\t\t\t\t\t.updatePerson({ ...person, number: newNumber })\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tsetPersons(\n\t\t\t\t\t\t\t\tpersons.map(per =>\n\t\t\t\t\t\t\t\t\tper.id === person.id ? res : per\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tsetSuccessMessage(\n\t\t\t\t\t\t\t\t`Changed Number of ${person.name}`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsetSuccessMessage(null)\n\t\t\t\t\t\t\t}, 5000)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tsetErrorMessage(\n\t\t\t\t\t\t\t\t`Information of ${person.name} has already been removed from server`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsetErrorMessage(null)\n\t\t\t\t\t\t\t}, 5000)\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\tif (isNew) {\n\t\t\tpersonsService\n\t\t\t\t.addPerson({\n\t\t\t\t\tname: newName,\n\t\t\t\t\tnumber: newNumber\n\t\t\t\t})\n\t\t\t\t.then(response => setPersons(persons.concat(response)))\n\t\t\tsetSuccessMessage(`Added ${newName}`)\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetSuccessMessage(null)\n\t\t\t}, 5000)\n\t\t}\n\t\tsetNewName(\"\")\n\t\tsetNewNumber(\"\")\n\t}\n\n\tconst numbersToShow = persons.filter(person =>\n\t\tperson.name.toLowerCase().includes(searchText.toLowerCase())\n\t)\n\n\tconst deletePerson = id => {\n\t\tpersonsService\n\t\t\t.deletePerson(id)\n\t\t\t.then(setPersons(persons.filter(person => person.id !== id)))\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<h2>Phonebook</h2>\n\t\t\t<Notification message={successMessage} type=\"success\" />\n\t\t\t<Notification message={errorMessage} type=\"error\" />\n\n\t\t\t<Filter handleSearchChange={handleSearchChange} />\n\t\t\t<h2>add a new</h2>\n\t\t\t<PersonForm\n\t\t\t\taddPerson={addPerson}\n\t\t\t\tnewNumber={newNumber}\n\t\t\t\tnewName={newName}\n\t\t\t\thandleNameChange={handleNameChange}\n\t\t\t\thandleNumberChange={handleNumberChange}\n\t\t\t/>\n\t\t\t<h2>Numbers</h2>\n\t\t\t<Persons\n\t\t\t\tnumbersToShow={numbersToShow}\n\t\t\t\tdeletePerson={deletePerson}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n\nexport default App\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\"\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}